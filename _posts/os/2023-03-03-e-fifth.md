---
layout: single
title: "5장 교착 상태와 기아 상태"
categories: [OS]
last_modified_at: 2023-03-31
---

### 1)교통 마비 상태를 사용하여 교착상태 발생 조건에 대하여 설명하세요. 경쟁 상태와 교착 상태, 기아 상태 사이의 차이점은 무엇인가요
교착 상태란 결코 일어나지 않을 사건을 기다리는 상태를 말한다. 마치 교통량이 많은 교차로에서 모든 차들이 서로를 기다리면서 움직일 수 없는 상황인 것이다. 앞에 있는 차가 움직이지 않아 가고 싶어도 갈 수 없고 기다리며 정지해 있다. 자원인 교차로를 공유하면서 기다리고 있지만  필요한 자원을 얻지 못하면 대기 상태에 빠지는 것이다 모든 차들이 대기하면서 움직일 수 없어서 교통마비에 빠지는 것이다. 이처럼 교착 상태는 자원을 공유하는 프로세스들이 서로 기다리며 자원을 할당받지 못하고 대기 상태에 빠지면 시스템이 정체되는 상황인 것이다. 경쟁 상태는 두 개 이상의 프로세스가 동일한 자원에 접근하면서 그 자원을 사용하려고 경쟁하는 상황을 말한다. 기아 상태는 자원 사용을 위해 대기하는 프로세스의 우선순위가 낮거나 자원 사용에 계속 실패하면서 자원을 할당받지 못하고 계속 대기하는 상황을 말한다. 교착 상태는 서로 자원을 요청하며 얻지 못한 프로세스가 무한정 대기하는 상황이다. 


### 2)자원할당 그래프에서 사이클이 있더라도 교착상태가 항상 발생하지는 않는다. 사이클을 형성하더라도 교착 상태가 발생하지 않는 예를 만들어 충분히 설명하세요.

자원 할당 그래프에서 사이클이 없다면 교착상태가 아니다. 하지만 사이클이 있더라도 시스템이 무조건 교착 상태인 것은 아니다. 모든 프로세스가 자원을 사용하기 위해 필요한 모든 자원을 보유할 수 있는 상태라면 교착 상태가 발생하지 않는다.
![자원할당](https://user-images.githubusercontent.com/48408195/229401707-2cec8c50-0947-41aa-a4b7-b69a62554edc.PNG)

사이클이 있으나 교착 상태가 아닌 할당 그래프이다. 자원 R2를 점유하고 있는 프로세스 P4가 작업을 할 수 있기 때문에 작업이 끝나면 P3이 여유 인스턴스를 가져 갈 수 있어서 사이클이 사라진다. 실제 교착 상태를 가지는 그래프와의 차이점은 실제로 모든 필요한 자원을 확보해 임계구역을 나갈 수 있는 프로세스가 있느냐이고 위의 그래프에서는 P4가 그 예다.


### 3)시스템의 안정 상태와 불안정 상태를 먼저 설명 한 후, 은행가 알고리즘(Banker's Algorithm)에 대하여 충분히 설명하세요.

안정 상태는 모든 프로세스가 작업을 끝낼 수 있도록 자원을 할당할 수 있는 상태가 안정상태이다. 그 반대는 불안정 상태로 교착 상태가 발생할 수 있지만 반드시 교착 상태가 발생하는 것은 아니다. 교착상태의 해결 방법은 예방, 회피, 탐지 및 회복으로 3가지가 있다. 일반적인 교착상태 예방은 4가지 방법이 있다. 자원의 상호배제 조건 방지, 점유와 대기 조건 방지, 비선점 조건 방지, 순환 대기 조건 방지. 하지만 이중에 상호배제 해지는 일반적으로 교착상태 예방책으로 사용하지 않는다. 회피의 방법에는 은행가 알고리즘(Banker's Algorithm)이 있다. 은행가 알고리즘은 프로세스들이 자원을 요청할 때마다 교착상태에 빠질 가능성을 사전에 파악해 안전하게 할당할 수 있도록 한다. 자원의 사용 가능 개수와 각 프로세스들이 필요로 하는 자원의 수를 파앋하고 자원을 할당한 후에도 다른 프로세스들이 자원을 사용할 수 있는지 체크한다. 은행가 알고리즘은 안정상태를 유지할때만 자원을 할당한다. 은행가 알고리즘은 할당할 수 있는 자원의 일정량을 요청하고 자원은 수시로 유지 보수 필요하고 고장이나 예방 보수 하기 떄문에 일정하게 남아 있는 자원 수를 파악하기 매우 곤란하고 항상 불안정 상태를 방지해야 하기 떄문에 자원 이용도가 낮다 탐지 및 회복은 말 그대로 교착 상태가 발생하면 탐지해서 회복한다. 회복에는 프로세스 종료, 교착 상태를 일으킨 자원을 선점해 다른 프로세스에게 할당, 롤백 등이 있다. 기아상태는 각 작업이 기다린 시간을 조사해 오래된 순으로 수행하게 하여 해결가능하다. 이를 Aging 이라함.

.

