---
layout: single
title: "4장 병행 프로세스와 상호배제"
categories: [OS]
last_modified_at: 2023-03-24
---

### 1)다중 프로그래밍 운영체제에서는 한 순간에 여러 프로세스가 공유하는 데이터와 자원에 대하여 한 순간에는 반드시 프로세스 하나만 자원이나 데이터를 사용하도록 하여야 한다. 임계영역과 임계자원에 대하여 설명하세요.

임계영역은 다수의 프로세스가 공유하는 자원을 접근하는 코드 영역을 말한다. 동시에 여러개가 접근 할 수 있고 서로 충돌하면 문제가 발생할 수 있는 부분이다. 공유 메모리나 공유변수 등에 접근하는 부분이 임계영역이 될 수 있다. 임계자원은 이런 임계영역에서 프로세스가 접근하는 공유 자원을 말한다. 즉 여려개의 프로세스가 접근하면 문제가 발생할 수 있는 자원이다. 프린터 ,파일 등이 있다. 이를 보호하기 위해 운영체제는 Lock, 인터럽트 불능화 등의 상호배제를 이용해 막는다.   


### 2)경쟁상태(race condition)에 대하여 설명하고 이를 피할 수 있는 방법인 상호배제에 대하여 설명하세요.

경쟁상태란 두 개 이상의 프로세스들이 하나의 자원에 접근하기 위해 경쟁하는 상태를 말한다. 공유 자원에 동시 접근하거나 같은 자원에 동시에 접근하지 않았지만 실행 순서에 따라 충돌하거나 예상치 못한 상황이 발생할 수 있다. 그리고 이런 상태를 막기 위한 방법이 바로 상호배제이다. 이해하기 쉽게 비유를 하면 손님이 한명만 앉을 수 있는 이발소에 손님이 이발을 하고 있으면(임계영역) 이발사(운영체제)는 다른 손님이 오지 못하게 막아야한다.(상호배제) 상호배제를 통해 경쟁상태를 방지하고 데이터 무결성을 유지할 수 있다.


### 3)상호배제를 위한 방법은 다양하면서 동시에 임계영역에 들어가 경쟁상태에 빠질 수 있는 한계를 모두 가지고 있다. 우선순위 역전 현상과 깨우기 분실 현상에 대하여 설명하세요. 세마포어의 값이 음수일 때 그 의미는 무엇인가요 ?

우선순위 역전 현상이란 우선 순위가 낮은 프로세스가 공유 자원을 점유하고 있어 우선순위가 높은 프로세스를 대기시키는 현상을 말한다. 일부 자원은 다른 프로세스가 선점할 수 없기 떄문에 이런 자원을 점유한 프로세스가 다른 프로세스의 우선순위를 낮추거나 공유 자원을 점유한 프로세스가 자원을 반환하지 않고 대기하는 경우 발생할 수 있다. 깨우기 분실 현상은 프로세스가 대기 상태에서 깨어나야 할 때 신호가 전달되지 않아 영원히 대기하는 상황을 말한다 이 현상은 다중 프로세스 환경에서 중요한 문제 중 하나이며 다양한 해결법이 있지만 가장 일반적인 방법은 대기 상태와 신호 발생지점을 동시화 하여 발생 가능성을 최소화 하는 것이다. 이를 이해 사용하는 기법중 하나로 세마포어 동기화가 있다. 바쁜대기에서 우선 순위 역전 현상을 해결하기 위해 sleeping-wakeup으로 상호배제 하는데 이때 깨우기 분실 현상을 해결하기 위해 wakeup 신호 발생 수를 저장하는 변수가 바로 세마포어다. 위에 2번에서 사용한 비유를 연장하자면 손님이 이발중일때 다른 손님이 이용중인 손님이 끝났는지 확인하기 위해 계속 왔다 갔다하는 상태를 바쁜대기라 할 수 있다. 자원 사용을 위해 무한 반복문을 실행하며 자원이 해제될 때까지 확인하는 것이다. 그리고 이를 해결하기 위해 이발사가 손님에게 끝나면 신호를 주고 그때까지 손님은 집에서 자면서 대기 할 수 있는거다. 바쁜대기 세마포어 값은 음수가 될 수 없지만 sleeping-wakeup 세마포어 값은 음수 값이 가능하며 이때 음수는 세마포를 기다리는 프로세스 수를 나타낸다 즉 sleep 하고 있는 프로세스 수를 말하는거다.


